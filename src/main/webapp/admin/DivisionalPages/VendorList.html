<script>
  $(document).ready(function () {
    document.getElementById('demo').innerHTML = '';
    $("#tbodyid").on('click', '.viewbtn', function () {
      //alert($(this).attr("id"));
      var viewresp = $(this).attr("modaldata");
      console.log(viewresp);

      var resp = JSON.parse(viewresp);
      var vid = resp.id;
      var vorg = resp.organisationName;
      var vpan = resp.vendorPan;
      var vhsn = resp.vendorHsnCode;
      var vgd = resp.goodsDetails;
      var vadd = resp.address;
      var vcon = resp.contactNo;
      var vem = resp.email;
      var valtc = resp.alternateContactNo;
      var valte = resp.alternateEmail;
      var vgstin = resp.gstin;
      var vupiId = resp.upiId;
      var vbankName = resp.bankName;
      var vbankBranch = resp.bankBranch;
      var vbankAccountNo = resp.bankAccountNo;
      var vbankIfsc = resp.bankIfsc;
      var vbankMicr = resp.bankMicr;
      var vvendorCategoryName = resp.vendorCategoryName;
      var vvendorConstitutionName = resp.vendorConstitutionName;
      for (j = 0; j < resp.trains.length; j++) {

        var vtrainsid = resp.trains[j].id;
        var vtrainsno = resp.trains[j].trainNo;
        var vtrainsname = resp.trains[j].trainName;
      }
      alert(vid)
      document.getElementById('demo').innerHTML = vid;
      document.getElementById('demo1').innerHTML = vorg;
      document.getElementById('demo2').innerHTML = vpan;
      document.getElementById('demo3').innerHTML = vhsn;
      document.getElementById('demo4').innerHTML = vgd;
      document.getElementById('demo5').innerHTML = vadd;
      document.getElementById('demo6').innerHTML = vcon;
      document.getElementById('demo7').innerHTML = vem;
      document.getElementById('demo8').innerHTML = valtc;
      document.getElementById('demo9').innerHTML = valte;
      document.getElementById('demo10').innerHTML = vgstin;
      document.getElementById('demo11').innerHTML = vupiId;
      document.getElementById('demo12').innerHTML = vbankName;
      document.getElementById('demo13').innerHTML = vbankBranch;
      document.getElementById('demo14').innerHTML = vbankAccountNo;
      document.getElementById('demo15').innerHTML = vbankIfsc;
      document.getElementById('demo16').innerHTML = vbankMicr;
      document.getElementById('demo17').innerHTML = vvendorCategoryName;
      document.getElementById('demo18').innerHTML = vvendorConstitutionName;
      document.getElementById('demo19').innerHTML = vtrainsid;
      document.getElementById('demo20').innerHTML = vtrainsno;
      document.getElementById('demo21').innerHTML = vtrainsname;





      $('#myModal').modal('show');

    });


    $('#tableID').DataTable({
      responsive: true
    });

    fetchInquiries();
    function fetchInquiries() {
      var tbodyHtml = "";
      commongetmethod("http://203.176.113.183/VendorAppServices//divisional/getVendors").then((response) => {
        /*  console.log(JSON.stringify(response)); */

        for (i = 0; i < response.length; i++) {
          tbodyHtml += "<tr>"
          tbodyHtml += "<td>" + response[i].organisationName + " </td>" +
            "<td>" + response[i].contactNo + " </td>" +
            "<td>" + response[i].email + " </td>" +
            "<td>" + response[i].vendorConstitutionName + " </td>" +
            "<td>" + "<button type='button'  class='btn btn-secondary viewbtn' modaldata='" + JSON.stringify(response[i]) + "' >View</button>" + " </td>" +
            "<td class='d-none'>" + response[i].psgnName + " </td></tr>";

        }
        $("#tbodyid").html(tbodyHtml);
      })
        .fail((xhr, status) => {
          if (xhr.status == "401") {
            refreshToken().then((res) => {
              console.log(res);
              setSessionStorageItems(res);
              fetchInquiries();
            });
          }
        });

    }

  });


</script>
<div class="container">
  <div class="row">
    <div class="col">
      <table id="tableID" class="display hover" style="width:100%">
        <thead>
          <tr>
            <th>vendorConstitutionName</th>
            <th>Contact No</th>

            <th>Email</th>
            <th>VendorCategory</th>
            <th>Action</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <th>vendorConstitutionName</th>
            <th>Contact No</th>
            <th>Email</th>
            <th>VendorCategory</th>
            <th>Action</th>
          </tr>
        </tfoot>
        <tbody id="tbodyid">


        </tbody>

      </table>
    </div>
  </div>
</div>
<div class="modal  fade" id="myModal" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header text-center">
        <h4 class="modal-title"></h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal body -->
      <div class="modal-body mb-3" id="modal-body">
        <div class="container-fluid text-center    ">
          <div class="text-center bg-danger text-white mt-2 text-center">
            <h4 class="blockquote">VendorDetails</h4>
          </div>
          <div class="row border  text-center">
            <div class="col-md-3 mt-3">
              <span class="h6">Id:</span>
              <p id="demo"></p>
            </div>
            <div class="col-md-3 mt-3">
              <span class="h6 ">OrangisationName:</span>
              <p id="demo1"></p>
            </div>
            <div class="col-md-3 mt-3">
              <span class="h6">VendorPan:</span>
              <p id="demo2"></p>
            </div>
            <div class="col-md-3 mt-3">
              <span class="h6 ">VendorHSNCode:</span>
              <p id="demo3"></p>
            </div>

          </div>
          <div class="row border text-center ">
            <div class="col-md-3 mt-3 ">
              <span class="h6 ">GoodsDetail:</span>
              <p id="demo4"></p>
            </div>
            <div class="col-md-3  mt-3">
              <span class="h6 ">Address:</span>
              <p id="demo5"></p>
            </div>
            <div class="col-md-3 mt-3">
              <span class="h6 ">ContactNo:</span>
              <p id="demo6"></p>
            </div>
            <div class="col-md-3 mt-3 ">
              <span class="h6 "> Email:</span>
              <p id="demo7"></p>
            </div>

          </div>
          <div class="row border text-center ">
            <div class="col-md-3  mt-3">
              <span class="h6 ">Alternate-Contact</span>
              <p id="demo8"></p>
            </div>
            <div class="col-md-3 mt-3 ">
              <span class="h6 ">Alternate-Email:</span>
              <p id="demo9"></p>
            </div>
            <div class="col-md-3 mt-3 ">
              <span class="h6 ">GSTIN:</span>
              <p id="demo10"></p>
            </div>
            <div class="col-md-3 mt-3">
              <span class="h6 ">UPID:</span>
              <p id="demo11"></p>
            </div>

          </div>
          <div class="row border text-center ">
            <div class="col-md-3 mt-3">
              <span class="h6 ">BankName:</span>
              <p id="demo12"></p>
            </div>
            <div class="col-md-3 mt-3 ">
              <span class="h6 ">BankBranch:</span>
              <p id="demo13"></p>
            </div>
            <div class="col-md-3 mt-3 ">
              <span class="h6 ">Bank-Account:</span>
              <p id="demo14"></p>
            </div>
            <div class="col-md-3 mt-3">
              <span class="h6 "> Bank-IFSC:</span>
              <p id="demo15"></p>
            </div>

          </div>
          <div class="row border text-center">
            <div class="col-md-3 mt-3  ">
              <span class="h6 "> BankMicr:</span>
              <p id="demo16"></p>
            </div>
            <div class="col-md-3 mt-3 ">
             <span class="h6"> vendorCategoryName: </span> 
              <p id="demo17"></p>

            </div>
            <div class="col-md-3 mt-3">
              <span class="h6"> vendorConstitutionName:</span>
              <p id="demo18"></p>
            </div>

           

          </div>
            <div class="row border text-center">
            
              <div class="col-md-4 mt-3  ">
              <span class="h6 "> Train_id:</span>
              <p id="demo19"></p>
            </div>
            <div class="col-md-4 mt-3">
               <span class="h6 "> TrainNo:</span>
              <p id="demo20"></p>
             </div>
             
             <div class="col-md-4 mt-3">
             
              <span class="h6 "> TrainName:</span>
              <p id="demo21"></p>
             
               </div>
            
             </div>

   


        </div>



      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>