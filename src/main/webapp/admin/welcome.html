<!DOCTYPE html>
<html lang="en">

<head>
    <script src="js/commonJs.js?version=6"></script>
</head>

<style>
    .nav-pills .nav-link.active,
    .nav-pills .show>.nav-link {
        color: #fff;
        background-color: #a1a59a !important;
    }

    .nav-pills .nav-link.active,
    .nav-pills .show>.nav-link {
        color: #fff;
        background-color: #a1a59a !important;
    }




    .scroll {

      
        
        overflow: auto;
        text-align: justify;
        padding: 20px;
        padding-bottom: 10rem;
        scrollbar-color: gray white;
    }
</style>
<div id="head"></div>

<body class="overflow-hidden">

    <header id="header"></header>
    <div class="container-fluid  py-1 ">
        <div class="row ">

            <div class="col-md-5 text-center">
                <span data-bs-toggle="tooltip" title="User"><strong class="font-14 text-center"
                        id="welcomeP"></strong></span>

            </div>


            <div class="col offset-6 p-2">
                <a href="#" id="logoutlink"> <button class='btn btn-outline-success'>Logout</button></a>
            </div>
            
        </div>
        
                <div class="row ">
        <div class="col-12 pos-f-t d-block d-md-none d-lg-none">
  <div class="collapse" id="navbarToggleExternalContent">
    <div class="bg-dark p-4 sidebar">
    </div>
  </div>
  <nav class="navbar navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>
</div>
                <div class="d-none d-md-block col-md-3 col-sm-5 sidebar">
                    
                </div>
                <div class=" col-12 col-md-9 col-sm-7 scroll ">
                    <div class="col" id="content">
                        <div id="maincontent"></div>
                    </div>
                </div>
        
        </div>

    </div>

    <footer class="footer" id="footer"></footer>
</body>
<script src="/VendorAppWeb/assets/js/bootstrap.js"></script>
<script src="/VendorAppWeb/assets/js/all.min.js"></script>
<script src="/VendorAppWeb/assets/js/jquery.js"></script>
<script src="/VendorAppWeb/assets/css/footer.css"></script>

  <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">  

<script>

    
    $(document).ready(() => {
    	checksession();
    	$(".scroll").css("height", $(window).height()-200);

        $("#logoutlink").on("click", function () {

            sessionStorage.clear();
            $(location).attr('href', window.location.pathname.substring(0, window.location.pathname.indexOf("/", 2)) + '/index.html');


        });
        $('.sidebar').load('sidebar.html')

        $('#head').load(window.location.pathname.substring(0, window.location.pathname.indexOf("/", 2)) + '/head.html')
        $('#header').load(window.location.pathname.substring(0, window.location.pathname.indexOf("/", 2)) + '/header.html')
     
        var userType=sessionStorage.getItem("usertype");
        if(userType=='DIVISIONAL'){
        	printDivisionalUserDetail();
        	$('#maincontent').load('DivisionalPages/registration.html')
    	}else if(userType=='VENDOR'){
        	printVendorUserDetail();
    		$('#maincontent').load('VendorPages/taxifare.html')
    	}
        
        $('#footer').load(window.location.pathname.substring(0, window.location.pathname.indexOf("/", 2)) + '/footer.html')



      function printVendorUserDetail(){

        	commongetmethod("http://203.176.113.183/VendorAppServices/vendor/getprofile").then((response)=>{
                         
                $("#welcomeP").html("Welcome " + response.firstName + ", mobile: " + response.contactNo + ", Email: " + response.email);

            	
            	})
            	.fail((xhr,status)=>{
            		if (xhr.status == '401') {
            		refreshToken().then((res) => {
                      	console.log(res);
                      	setSessionStorageItems(res);
                      	printVendorUserDetail();
                	});
            		}
        });

        }  

        function printDivisionalUserDetail() {

        	 var username = sessionStorage.getItem('username');
        	commongetmethod("http://203.176.113.183/VendorAppServices/divisional/userdetails/" + username).then((response)=>{
                
                $("#welcomeP").html("Welcome " + username + " Zone: " + response.zoneName + " Division: " + response.divName);

            	
            	})
            	.fail((xhr,status)=>{
            		if (xhr.status == '401') {
            		refreshToken().then((res) => {
                      	console.log(res);
                      	setSessionStorageItems(res);
                      	printDivisionalUserDetail();
                	});
            		}
        });


        	        }
        	        
    });
</script>

</html>
