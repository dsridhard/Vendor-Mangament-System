<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<div class=" card border well rounded-5 shadow-lg">
  <div class="card-title rounded-5 py-1 px-3 text-center well border border-danger shadow-lg bg-danger text-white">
    LOGIN
  </div>
  <div class="card-body">
    <form action="" class=" form-group text-dark" id="vendorloginform">
      <label for="email" class="form-label">UserType:</label>
      <div class="input-group mb-3">
        <span class="input-group-text"><i class="fa fa-users"></i></span>
        <select title="Select User" class="form-select text-center border-dark  id=" sel1" name="sellist1" required>
          <option title="Select" class="text-danger text-center">Select</option>
          <option title="Vendor" class="text-danger text-center" value=" Vendor">Vendor</option>
          <option title="Division" class="text-danger text-center" value="Division">Division</option>
        </select>
      </div>

      <label for="email" class="form-label">UserName:</label>
      <div class="input-group mb-3  ">
        <span class="input-group-text  ">U</span>
        <input type="text" class="form-control  border-dark" placeholder="Username" id="username" name="usrname" required />
      </div>

      <div class="mb-3">
        <label for="pwd" class="form-label">Password:</label>
        <input type="password" class="form-control border-dark" id="password" placeholder="Enter password" name="pswd"
          required />
      </div>

      <div>
        <button type="submit" class=" form-control btn btn-primary border-primary " title="Submit">
          Submit <i class="fa fa-sign-in"></i>
        </button>
      </div>
    </form>
  </div>
</div>
<script>

$(document).ready(function (e){
	$("#vendorloginform").submit(function(e){
	alert("hello");
		e.preventDefault();
		var username=$("#username").val();
		var password=$("#password").val();
		var settings = {
				  "url": "http://203.176.113.183/VendorAppLogin/oauth/token",
				  "method": "POST",
				  "timeout": 0,
				  "headers": {
				    "Authorization": "Basic dmVuZG9yYXBwOnNlY3JldA==",
				    "Content-Type": "application/x-www-form-urlencoded"
				  },
				  "data": {
				    "username":username ,
				    "password": password,
				    "grant_type": "password",
				    "userLoginType": "DIVISIONAL"
				  }
				};

				$.ajax(settings).done(function (response) {
					//alert("inside response");
				  //console.log(response);
				  var access_token=response.access_token;
				  console.log(access_token);
				  
				 // sessionStorage.setItem("access_token" , access_token);
				 // document.cookie=access_token; 
				 // document.cookie = "user = 'access_token'; max-age=60";
				 // alert( document.cookie);
				 if(access_token!=''){
				  sessionStorage.setItem('key', access_token); 
				    //A value meant to expire in 5 minutes
				    sessionStorage.setItem('username', username);
				    sessionStorage.setItem('password', password);
				    sessionStorage.setItem('usertype', "DIVISIONAL");
					 $(location).attr('href', window.location.pathname.substring(0, window.location.pathname.indexOf("/",2))+'/dashboard.html');	
				 }
				 else{

	                      alert("invalid credentials");

					 }
	});
	});
	});


</script>